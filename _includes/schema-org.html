<!-- Schema.org base de la organización -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ site.schema.type }}",
  "name": "{{ site.company.name }}",
  "description": "{{ site.description }}",
  "url": "{{ site.url }}",
  "foundingDate": "{{ site.schema.founding_date }}",
  "areaServed": {
    "@type": "Place",
    "name": "{{ site.schema.area_served }}"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "{{ site.company.phone }}",
    "email": "{{ site.company.email }}",
    "contactType": "customer support",
    "availableLanguage": ["Spanish", "English"]
  }{% if site.company.logo %},
  "logo": "{{ site.url }}{{ site.company.logo }}"{% endif %}
}
</script>

<!-- Schema dinámico según tipo de página -->
{% if page.schema_type or layout.schema_type %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{% if page.schema_type %}{{ page.schema_type }}{% else %}{{ layout.schema_type }}{% endif %}",
  "name": "{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}",
  "description": "{% if page.description %}{{ page.description | strip_html | strip_newlines }}{% else %}{{ site.description | strip_html | strip_newlines }}{% endif %}",
  {% if page.image or site.default_image %}"image": "{{ site.url }}{% if page.image %}{{ page.image }}{% else %}{{ site.default_image }}{% endif %}",{% endif %}
  "url": "{{ site.url }}{{ page.url }}"
  {% if page.schema_type == 'TouristDestination' or page.schema_type == 'TouristAttraction' %},
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "{% if page.latitude %}{{ page.latitude }}{% else %}2.9273{% endif %}",
    "longitude": "{% if page.longitude %}{{ page.longitude }}{% else %}-75.2819{% endif %}"
  },
  "address": {
    "@type": "PostalAddress",
    "addressRegion": "Huila",
    "addressCountry": "CO"
  }{% if page.opening_hours %},
  "openingHours": "{{ page.opening_hours }}"{% endif %}{% endif %}
  {% if page.schema_type == 'TouristTrip' %},
  "provider": {
    "@type": "TravelAgency",
    "name": "{{ site.company.name }}",
    "url": "{{ site.url }}"
  }{% if page.price %},
  "offers": {
    "@type": "Offer",
    "price": "{{ page.price }}",
    "priceCurrency": "COP",
    "availability": "https://schema.org/InStock"{% if page.valid_from %},
    "validFrom": "{{ page.valid_from }}"{% endif %}{% if page.valid_through %},
    "validThrough": "{{ page.valid_through }}"{% endif %}
  }{% endif %}{% if page.duration %},
  "duration": "{{ page.duration }}"{% endif %}{% if page.included_services %},
  "includesObject": [
    {% for service in page.included_services %}
    {
      "@type": "Service",
      "name": "{{ service }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]{% endif %}{% endif %}
  {% if page.schema_type == 'BlogPosting' or page.layout == 'post' %},
  "author": {
    "@type": "Person",
    "name": "{% if page.author %}{{ page.author }}{% else %}{{ site.author }}{% endif %}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.company.name }}",
    "url": "{{ site.url }}"{% if site.company.logo %},
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.url }}{{ site.company.logo }}"
    }{% endif %}
  },
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{% if page.last_modified_at %}{{ page.last_modified_at | date_to_xmlschema }}{% else %}{{ page.date | date_to_xmlschema }}{% endif %}"{% if page.categories %},
  "articleSection": "{{ page.categories | first }}"{% endif %}{% if page.tags %},
  "keywords": "{{ page.tags | join: ', ' }}"{% endif %}{% endif %}
  {% if page.rating %},
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ page.rating.value }}",
    "reviewCount": "{{ page.rating.count }}"
  }{% endif %}
  {% if page.reviews %},
  "review": [
    {% for review in page.reviews %}
    {
      "@type": "Review",
      "author": {
        "@type": "Person",
        "name": "{{ review.author }}"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "{{ review.rating }}"
      },
      "reviewBody": "{{ review.text }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]{% endif %}
}
</script>
{% endif %}

<!-- Breadcrumb Schema -->
{% if page.breadcrumbs %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {% for crumb in page.breadcrumbs %}
    {
      "@type": "ListItem",
      "position": {{ forloop.index }},
      "name": "{{ crumb.name }}",
      "item": "{{ site.url }}{{ crumb.url }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}